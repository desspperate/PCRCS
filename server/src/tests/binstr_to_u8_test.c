#include <assert.h>

#include "../util/binstr_to_u8.c"
#include "../util/u8_pow.c"

void binstr_to_u8_test() {
    assert(binstr_to_u8("\0\xff", 2) == 0);
    assert(binstr_to_u8("\1\xff", 2) == 1);
    assert(binstr_to_u8("\1\0\xff", 3) == 2);
    assert(binstr_to_u8("\1\1\xff", 3) == 3);
    assert(binstr_to_u8("\1\0\0\xff", 4) == 4);
    assert(binstr_to_u8("\1\0\1\xff", 4) == 5);
    assert(binstr_to_u8("\1\1\0\xff", 4) == 6);
    assert(binstr_to_u8("\1\1\1\xff", 4) == 7);
    assert(binstr_to_u8("\1\0\0\0\xff", 5) == 8);
    assert(binstr_to_u8("\1\0\0\1\xff", 5) == 9);
    assert(binstr_to_u8("\1\0\1\0\xff", 5) == 10);
    assert(binstr_to_u8("\1\0\1\1\xff", 5) == 11);
    assert(binstr_to_u8("\1\1\0\0\xff", 5) == 12);
    assert(binstr_to_u8("\1\1\0\1\xff", 5) == 13);
    assert(binstr_to_u8("\1\1\1\0\xff", 5) == 14);
    assert(binstr_to_u8("\1\1\1\1\xff", 5) == 15);
    assert(binstr_to_u8("\1\0\0\0\0\xff", 6) == 16);
    assert(binstr_to_u8("\1\0\0\0\1\xff", 6) == 17);
    assert(binstr_to_u8("\1\0\0\1\0\xff", 6) == 18);
    assert(binstr_to_u8("\1\0\0\1\1\xff", 6) == 19);
    assert(binstr_to_u8("\1\0\1\0\0\xff", 6) == 20);
    assert(binstr_to_u8("\1\0\1\0\1\xff", 6) == 21);
    assert(binstr_to_u8("\1\0\1\1\0\xff", 6) == 22);
    assert(binstr_to_u8("\1\0\1\1\1\xff", 6) == 23);
    assert(binstr_to_u8("\1\1\0\0\0\xff", 6) == 24);
    assert(binstr_to_u8("\1\1\0\0\1\xff", 6) == 25);
    assert(binstr_to_u8("\1\1\0\1\0\xff", 6) == 26);
    assert(binstr_to_u8("\1\1\0\1\1\xff", 6) == 27);
    assert(binstr_to_u8("\1\1\1\0\0\xff", 6) == 28);
    assert(binstr_to_u8("\1\1\1\0\1\xff", 6) == 29);
    assert(binstr_to_u8("\1\1\1\1\0\xff", 6) == 30);
    assert(binstr_to_u8("\1\1\1\1\1\xff", 6) == 31);
    assert(binstr_to_u8("\1\0\0\0\0\0\xff", 7) == 32);
    assert(binstr_to_u8("\1\0\0\0\0\1\xff", 7) == 33);
    assert(binstr_to_u8("\1\0\0\0\1\0\xff", 7) == 34);
    assert(binstr_to_u8("\1\0\0\0\1\1\xff", 7) == 35);
    assert(binstr_to_u8("\1\0\0\1\0\0\xff", 7) == 36);
    assert(binstr_to_u8("\1\0\0\1\0\1\xff", 7) == 37);
    assert(binstr_to_u8("\1\0\0\1\1\0\xff", 7) == 38);
    assert(binstr_to_u8("\1\0\0\1\1\1\xff", 7) == 39);
    assert(binstr_to_u8("\1\0\1\0\0\0\xff", 7) == 40);
    assert(binstr_to_u8("\1\0\1\0\0\1\xff", 7) == 41);
    assert(binstr_to_u8("\1\0\1\0\1\0\xff", 7) == 42);
    assert(binstr_to_u8("\1\0\1\0\1\1\xff", 7) == 43);
    assert(binstr_to_u8("\1\0\1\1\0\0\xff", 7) == 44);
    assert(binstr_to_u8("\1\0\1\1\0\1\xff", 7) == 45);
    assert(binstr_to_u8("\1\0\1\1\1\0\xff", 7) == 46);
    assert(binstr_to_u8("\1\0\1\1\1\1\xff", 7) == 47);
    assert(binstr_to_u8("\1\1\0\0\0\0\xff", 7) == 48);
    assert(binstr_to_u8("\1\1\0\0\0\1\xff", 7) == 49);
    assert(binstr_to_u8("\1\1\0\0\1\0\xff", 7) == 50);
    assert(binstr_to_u8("\1\1\0\0\1\1\xff", 7) == 51);
    assert(binstr_to_u8("\1\1\0\1\0\0\xff", 7) == 52);
    assert(binstr_to_u8("\1\1\0\1\0\1\xff", 7) == 53);
    assert(binstr_to_u8("\1\1\0\1\1\0\xff", 7) == 54);
    assert(binstr_to_u8("\1\1\0\1\1\1\xff", 7) == 55);
    assert(binstr_to_u8("\1\1\1\0\0\0\xff", 7) == 56);
    assert(binstr_to_u8("\1\1\1\0\0\1\xff", 7) == 57);
    assert(binstr_to_u8("\1\1\1\0\1\0\xff", 7) == 58);
    assert(binstr_to_u8("\1\1\1\0\1\1\xff", 7) == 59);
    assert(binstr_to_u8("\1\1\1\1\0\0\xff", 7) == 60);
    assert(binstr_to_u8("\1\1\1\1\0\1\xff", 7) == 61);
    assert(binstr_to_u8("\1\1\1\1\1\0\xff", 7) == 62);
    assert(binstr_to_u8("\1\1\1\1\1\1\xff", 7) == 63);
    assert(binstr_to_u8("\1\0\0\0\0\0\0\xff", 8) == 64);
    assert(binstr_to_u8("\1\0\0\0\0\0\1\xff", 8) == 65);
    assert(binstr_to_u8("\1\0\0\0\0\1\0\xff", 8) == 66);
    assert(binstr_to_u8("\1\0\0\0\0\1\1\xff", 8) == 67);
    assert(binstr_to_u8("\1\0\0\0\1\0\0\xff", 8) == 68);
    assert(binstr_to_u8("\1\0\0\0\1\0\1\xff", 8) == 69);
    assert(binstr_to_u8("\1\0\0\0\1\1\0\xff", 8) == 70);
    assert(binstr_to_u8("\1\0\0\0\1\1\1\xff", 8) == 71);
    assert(binstr_to_u8("\1\0\0\1\0\0\0\xff", 8) == 72);
    assert(binstr_to_u8("\1\0\0\1\0\0\1\xff", 8) == 73);
    assert(binstr_to_u8("\1\0\0\1\0\1\0\xff", 8) == 74);
    assert(binstr_to_u8("\1\0\0\1\0\1\1\xff", 8) == 75);
    assert(binstr_to_u8("\1\0\0\1\1\0\0\xff", 8) == 76);
    assert(binstr_to_u8("\1\0\0\1\1\0\1\xff", 8) == 77);
    assert(binstr_to_u8("\1\0\0\1\1\1\0\xff", 8) == 78);
    assert(binstr_to_u8("\1\0\0\1\1\1\1\xff", 8) == 79);
    assert(binstr_to_u8("\1\0\1\0\0\0\0\xff", 8) == 80);
    assert(binstr_to_u8("\1\0\1\0\0\0\1\xff", 8) == 81);
    assert(binstr_to_u8("\1\0\1\0\0\1\0\xff", 8) == 82);
    assert(binstr_to_u8("\1\0\1\0\0\1\1\xff", 8) == 83);
    assert(binstr_to_u8("\1\0\1\0\1\0\0\xff", 8) == 84);
    assert(binstr_to_u8("\1\0\1\0\1\0\1\xff", 8) == 85);
    assert(binstr_to_u8("\1\0\1\0\1\1\0\xff", 8) == 86);
    assert(binstr_to_u8("\1\0\1\0\1\1\1\xff", 8) == 87);
    assert(binstr_to_u8("\1\0\1\1\0\0\0\xff", 8) == 88);
    assert(binstr_to_u8("\1\0\1\1\0\0\1\xff", 8) == 89);
    assert(binstr_to_u8("\1\0\1\1\0\1\0\xff", 8) == 90);
    assert(binstr_to_u8("\1\0\1\1\0\1\1\xff", 8) == 91);
    assert(binstr_to_u8("\1\0\1\1\1\0\0\xff", 8) == 92);
    assert(binstr_to_u8("\1\0\1\1\1\0\1\xff", 8) == 93);
    assert(binstr_to_u8("\1\0\1\1\1\1\0\xff", 8) == 94);
    assert(binstr_to_u8("\1\0\1\1\1\1\1\xff", 8) == 95);
    assert(binstr_to_u8("\1\1\0\0\0\0\0\xff", 8) == 96);
    assert(binstr_to_u8("\1\1\0\0\0\0\1\xff", 8) == 97);
    assert(binstr_to_u8("\1\1\0\0\0\1\0\xff", 8) == 98);
    assert(binstr_to_u8("\1\1\0\0\0\1\1\xff", 8) == 99);
    assert(binstr_to_u8("\1\1\0\0\1\0\0\xff", 8) == 100);
    assert(binstr_to_u8("\1\1\0\0\1\0\1\xff", 8) == 101);
    assert(binstr_to_u8("\1\1\0\0\1\1\0\xff", 8) == 102);
    assert(binstr_to_u8("\1\1\0\0\1\1\1\xff", 8) == 103);
    assert(binstr_to_u8("\1\1\0\1\0\0\0\xff", 8) == 104);
    assert(binstr_to_u8("\1\1\0\1\0\0\1\xff", 8) == 105);
    assert(binstr_to_u8("\1\1\0\1\0\1\0\xff", 8) == 106);
    assert(binstr_to_u8("\1\1\0\1\0\1\1\xff", 8) == 107);
    assert(binstr_to_u8("\1\1\0\1\1\0\0\xff", 8) == 108);
    assert(binstr_to_u8("\1\1\0\1\1\0\1\xff", 8) == 109);
    assert(binstr_to_u8("\1\1\0\1\1\1\0\xff", 8) == 110);
    assert(binstr_to_u8("\1\1\0\1\1\1\1\xff", 8) == 111);
    assert(binstr_to_u8("\1\1\1\0\0\0\0\xff", 8) == 112);
    assert(binstr_to_u8("\1\1\1\0\0\0\1\xff", 8) == 113);
    assert(binstr_to_u8("\1\1\1\0\0\1\0\xff", 8) == 114);
    assert(binstr_to_u8("\1\1\1\0\0\1\1\xff", 8) == 115);
    assert(binstr_to_u8("\1\1\1\0\1\0\0\xff", 8) == 116);
    assert(binstr_to_u8("\1\1\1\0\1\0\1\xff", 8) == 117);
    assert(binstr_to_u8("\1\1\1\0\1\1\0\xff", 8) == 118);
    assert(binstr_to_u8("\1\1\1\0\1\1\1\xff", 8) == 119);
    assert(binstr_to_u8("\1\1\1\1\0\0\0\xff", 8) == 120);
    assert(binstr_to_u8("\1\1\1\1\0\0\1\xff", 8) == 121);
    assert(binstr_to_u8("\1\1\1\1\0\1\0\xff", 8) == 122);
    assert(binstr_to_u8("\1\1\1\1\0\1\1\xff", 8) == 123);
    assert(binstr_to_u8("\1\1\1\1\1\0\0\xff", 8) == 124);
    assert(binstr_to_u8("\1\1\1\1\1\0\1\xff", 8) == 125);
    assert(binstr_to_u8("\1\1\1\1\1\1\0\xff", 8) == 126);
    assert(binstr_to_u8("\1\1\1\1\1\1\1\xff", 8) == 127);
    assert(binstr_to_u8("\1\0\0\0\0\0\0\0\xff", 9) == 128);
    assert(binstr_to_u8("\1\0\0\0\0\0\0\1\xff", 9) == 129);
    assert(binstr_to_u8("\1\0\0\0\0\0\1\0\xff", 9) == 130);
    assert(binstr_to_u8("\1\0\0\0\0\0\1\1\xff", 9) == 131);
    assert(binstr_to_u8("\1\0\0\0\0\1\0\0\xff", 9) == 132);
    assert(binstr_to_u8("\1\0\0\0\0\1\0\1\xff", 9) == 133);
    assert(binstr_to_u8("\1\0\0\0\0\1\1\0\xff", 9) == 134);
    assert(binstr_to_u8("\1\0\0\0\0\1\1\1\xff", 9) == 135);
    assert(binstr_to_u8("\1\0\0\0\1\0\0\0\xff", 9) == 136);
    assert(binstr_to_u8("\1\0\0\0\1\0\0\1\xff", 9) == 137);
    assert(binstr_to_u8("\1\0\0\0\1\0\1\0\xff", 9) == 138);
    assert(binstr_to_u8("\1\0\0\0\1\0\1\1\xff", 9) == 139);
    assert(binstr_to_u8("\1\0\0\0\1\1\0\0\xff", 9) == 140);
    assert(binstr_to_u8("\1\0\0\0\1\1\0\1\xff", 9) == 141);
    assert(binstr_to_u8("\1\0\0\0\1\1\1\0\xff", 9) == 142);
    assert(binstr_to_u8("\1\0\0\0\1\1\1\1\xff", 9) == 143);
    assert(binstr_to_u8("\1\0\0\1\0\0\0\0\xff", 9) == 144);
    assert(binstr_to_u8("\1\0\0\1\0\0\0\1\xff", 9) == 145);
    assert(binstr_to_u8("\1\0\0\1\0\0\1\0\xff", 9) == 146);
    assert(binstr_to_u8("\1\0\0\1\0\0\1\1\xff", 9) == 147);
    assert(binstr_to_u8("\1\0\0\1\0\1\0\0\xff", 9) == 148);
    assert(binstr_to_u8("\1\0\0\1\0\1\0\1\xff", 9) == 149);
    assert(binstr_to_u8("\1\0\0\1\0\1\1\0\xff", 9) == 150);
    assert(binstr_to_u8("\1\0\0\1\0\1\1\1\xff", 9) == 151);
    assert(binstr_to_u8("\1\0\0\1\1\0\0\0\xff", 9) == 152);
    assert(binstr_to_u8("\1\0\0\1\1\0\0\1\xff", 9) == 153);
    assert(binstr_to_u8("\1\0\0\1\1\0\1\0\xff", 9) == 154);
    assert(binstr_to_u8("\1\0\0\1\1\0\1\1\xff", 9) == 155);
    assert(binstr_to_u8("\1\0\0\1\1\1\0\0\xff", 9) == 156);
    assert(binstr_to_u8("\1\0\0\1\1\1\0\1\xff", 9) == 157);
    assert(binstr_to_u8("\1\0\0\1\1\1\1\0\xff", 9) == 158);
    assert(binstr_to_u8("\1\0\0\1\1\1\1\1\xff", 9) == 159);
    assert(binstr_to_u8("\1\0\1\0\0\0\0\0\xff", 9) == 160);
    assert(binstr_to_u8("\1\0\1\0\0\0\0\1\xff", 9) == 161);
    assert(binstr_to_u8("\1\0\1\0\0\0\1\0\xff", 9) == 162);
    assert(binstr_to_u8("\1\0\1\0\0\0\1\1\xff", 9) == 163);
    assert(binstr_to_u8("\1\0\1\0\0\1\0\0\xff", 9) == 164);
    assert(binstr_to_u8("\1\0\1\0\0\1\0\1\xff", 9) == 165);
    assert(binstr_to_u8("\1\0\1\0\0\1\1\0\xff", 9) == 166);
    assert(binstr_to_u8("\1\0\1\0\0\1\1\1\xff", 9) == 167);
    assert(binstr_to_u8("\1\0\1\0\1\0\0\0\xff", 9) == 168);
    assert(binstr_to_u8("\1\0\1\0\1\0\0\1\xff", 9) == 169);
    assert(binstr_to_u8("\1\0\1\0\1\0\1\0\xff", 9) == 170);
    assert(binstr_to_u8("\1\0\1\0\1\0\1\1\xff", 9) == 171);
    assert(binstr_to_u8("\1\0\1\0\1\1\0\0\xff", 9) == 172);
    assert(binstr_to_u8("\1\0\1\0\1\1\0\1\xff", 9) == 173);
    assert(binstr_to_u8("\1\0\1\0\1\1\1\0\xff", 9) == 174);
    assert(binstr_to_u8("\1\0\1\0\1\1\1\1\xff", 9) == 175);
    assert(binstr_to_u8("\1\0\1\1\0\0\0\0\xff", 9) == 176);
    assert(binstr_to_u8("\1\0\1\1\0\0\0\1\xff", 9) == 177);
    assert(binstr_to_u8("\1\0\1\1\0\0\1\0\xff", 9) == 178);
    assert(binstr_to_u8("\1\0\1\1\0\0\1\1\xff", 9) == 179);
    assert(binstr_to_u8("\1\0\1\1\0\1\0\0\xff", 9) == 180);
    assert(binstr_to_u8("\1\0\1\1\0\1\0\1\xff", 9) == 181);
    assert(binstr_to_u8("\1\0\1\1\0\1\1\0\xff", 9) == 182);
    assert(binstr_to_u8("\1\0\1\1\0\1\1\1\xff", 9) == 183);
    assert(binstr_to_u8("\1\0\1\1\1\0\0\0\xff", 9) == 184);
    assert(binstr_to_u8("\1\0\1\1\1\0\0\1\xff", 9) == 185);
    assert(binstr_to_u8("\1\0\1\1\1\0\1\0\xff", 9) == 186);
    assert(binstr_to_u8("\1\0\1\1\1\0\1\1\xff", 9) == 187);
    assert(binstr_to_u8("\1\0\1\1\1\1\0\0\xff", 9) == 188);
    assert(binstr_to_u8("\1\0\1\1\1\1\0\1\xff", 9) == 189);
    assert(binstr_to_u8("\1\0\1\1\1\1\1\0\xff", 9) == 190);
    assert(binstr_to_u8("\1\0\1\1\1\1\1\1\xff", 9) == 191);
    assert(binstr_to_u8("\1\1\0\0\0\0\0\0\xff", 9) == 192);
    assert(binstr_to_u8("\1\1\0\0\0\0\0\1\xff", 9) == 193);
    assert(binstr_to_u8("\1\1\0\0\0\0\1\0\xff", 9) == 194);
    assert(binstr_to_u8("\1\1\0\0\0\0\1\1\xff", 9) == 195);
    assert(binstr_to_u8("\1\1\0\0\0\1\0\0\xff", 9) == 196);
    assert(binstr_to_u8("\1\1\0\0\0\1\0\1\xff", 9) == 197);
    assert(binstr_to_u8("\1\1\0\0\0\1\1\0\xff", 9) == 198);
    assert(binstr_to_u8("\1\1\0\0\0\1\1\1\xff", 9) == 199);
    assert(binstr_to_u8("\1\1\0\0\1\0\0\0\xff", 9) == 200);
    assert(binstr_to_u8("\1\1\0\0\1\0\0\1\xff", 9) == 201);
    assert(binstr_to_u8("\1\1\0\0\1\0\1\0\xff", 9) == 202);
    assert(binstr_to_u8("\1\1\0\0\1\0\1\1\xff", 9) == 203);
    assert(binstr_to_u8("\1\1\0\0\1\1\0\0\xff", 9) == 204);
    assert(binstr_to_u8("\1\1\0\0\1\1\0\1\xff", 9) == 205);
    assert(binstr_to_u8("\1\1\0\0\1\1\1\0\xff", 9) == 206);
    assert(binstr_to_u8("\1\1\0\0\1\1\1\1\xff", 9) == 207);
    assert(binstr_to_u8("\1\1\0\1\0\0\0\0\xff", 9) == 208);
    assert(binstr_to_u8("\1\1\0\1\0\0\0\1\xff", 9) == 209);
    assert(binstr_to_u8("\1\1\0\1\0\0\1\0\xff", 9) == 210);
    assert(binstr_to_u8("\1\1\0\1\0\0\1\1\xff", 9) == 211);
    assert(binstr_to_u8("\1\1\0\1\0\1\0\0\xff", 9) == 212);
    assert(binstr_to_u8("\1\1\0\1\0\1\0\1\xff", 9) == 213);
    assert(binstr_to_u8("\1\1\0\1\0\1\1\0\xff", 9) == 214);
    assert(binstr_to_u8("\1\1\0\1\0\1\1\1\xff", 9) == 215);
    assert(binstr_to_u8("\1\1\0\1\1\0\0\0\xff", 9) == 216);
    assert(binstr_to_u8("\1\1\0\1\1\0\0\1\xff", 9) == 217);
    assert(binstr_to_u8("\1\1\0\1\1\0\1\0\xff", 9) == 218);
    assert(binstr_to_u8("\1\1\0\1\1\0\1\1\xff", 9) == 219);
    assert(binstr_to_u8("\1\1\0\1\1\1\0\0\xff", 9) == 220);
    assert(binstr_to_u8("\1\1\0\1\1\1\0\1\xff", 9) == 221);
    assert(binstr_to_u8("\1\1\0\1\1\1\1\0\xff", 9) == 222);
    assert(binstr_to_u8("\1\1\0\1\1\1\1\1\xff", 9) == 223);
    assert(binstr_to_u8("\1\1\1\0\0\0\0\0\xff", 9) == 224);
    assert(binstr_to_u8("\1\1\1\0\0\0\0\1\xff", 9) == 225);
    assert(binstr_to_u8("\1\1\1\0\0\0\1\0\xff", 9) == 226);
    assert(binstr_to_u8("\1\1\1\0\0\0\1\1\xff", 9) == 227);
    assert(binstr_to_u8("\1\1\1\0\0\1\0\0\xff", 9) == 228);
    assert(binstr_to_u8("\1\1\1\0\0\1\0\1\xff", 9) == 229);
    assert(binstr_to_u8("\1\1\1\0\0\1\1\0\xff", 9) == 230);
    assert(binstr_to_u8("\1\1\1\0\0\1\1\1\xff", 9) == 231);
    assert(binstr_to_u8("\1\1\1\0\1\0\0\0\xff", 9) == 232);
    assert(binstr_to_u8("\1\1\1\0\1\0\0\1\xff", 9) == 233);
    assert(binstr_to_u8("\1\1\1\0\1\0\1\0\xff", 9) == 234);
    assert(binstr_to_u8("\1\1\1\0\1\0\1\1\xff", 9) == 235);
    assert(binstr_to_u8("\1\1\1\0\1\1\0\0\xff", 9) == 236);
    assert(binstr_to_u8("\1\1\1\0\1\1\0\1\xff", 9) == 237);
    assert(binstr_to_u8("\1\1\1\0\1\1\1\0\xff", 9) == 238);
    assert(binstr_to_u8("\1\1\1\0\1\1\1\1\xff", 9) == 239);
    assert(binstr_to_u8("\1\1\1\1\0\0\0\0\xff", 9) == 240);
    assert(binstr_to_u8("\1\1\1\1\0\0\0\1\xff", 9) == 241);
    assert(binstr_to_u8("\1\1\1\1\0\0\1\0\xff", 9) == 242);
    assert(binstr_to_u8("\1\1\1\1\0\0\1\1\xff", 9) == 243);
    assert(binstr_to_u8("\1\1\1\1\0\1\0\0\xff", 9) == 244);
    assert(binstr_to_u8("\1\1\1\1\0\1\0\1\xff", 9) == 245);
    assert(binstr_to_u8("\1\1\1\1\0\1\1\0\xff", 9) == 246);
    assert(binstr_to_u8("\1\1\1\1\0\1\1\1\xff", 9) == 247);
    assert(binstr_to_u8("\1\1\1\1\1\0\0\0\xff", 9) == 248);
    assert(binstr_to_u8("\1\1\1\1\1\0\0\1\xff", 9) == 249);
    assert(binstr_to_u8("\1\1\1\1\1\0\1\0\xff", 9) == 250);
    assert(binstr_to_u8("\1\1\1\1\1\0\1\1\xff", 9) == 251);
    assert(binstr_to_u8("\1\1\1\1\1\1\0\0\xff", 9) == 252);
    assert(binstr_to_u8("\1\1\1\1\1\1\0\1\xff", 9) == 253);
    assert(binstr_to_u8("\1\1\1\1\1\1\1\0\xff", 9) == 254);
    assert(binstr_to_u8("\1\1\1\1\1\1\1\1\xff", 9) == 255);
}